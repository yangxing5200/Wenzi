@using Ext.Net.MVC
@{
    ViewBag.Title = "Index";
    var X = Html.X();
}

<h2>Index</h2>
@X.GridPanel().Title("列表")
        .Width(600)
        .Store(Html.X().Store()
            .Model(Html.X().Model()
                .Fields(
                    new ModelField("Id"),
                    new ModelField("Content", ModelFieldType.String),
                    new ModelField("AuthName", ModelFieldType.String),
                    new ModelField("Creator", ModelFieldType.String),
                    new ModelField("CreateDate", ModelFieldType.Date, "M/d hh:mmtt")
                )
            )
            .DataSource(Model)
        )
        .ColumnModel(
            Html.X().Column().Text("编号").DataIndex("Id").Flex(1),
            Html.X().Column().Text("内容").DataIndex("Content"),
            Html.X().Column().Text("权限").DataIndex("AuthName"),
            Html.X().Column().Text("创建人").DataIndex("Creator"),
            Html.X().DateColumn().Text("创建时间").DataIndex("CreateDate"),
            X.CommandColumn().Width(120).Commands(
           X.GridCommand().CommandName("Edit").Icon(Icon.ImageEdit).Text("修改"),
           X.GridCommand().CommandName("Delete").Icon(Icon.Delete).Text("删除")
           ).Listeners(ls => ls.Command.Handler = "op(command,record)")
      ).TopBar(X.Toolbar().Items
        (
            X.Button().Text("添加")
            .Icon(Icon.Add)
            .Handler("App.UserForm.reset();App.Window2.show(this);"),
                X.Button().Text("删除")
                .Icon(Icon.Delete)
                            .Handler("this.up('grid').deleteSelected(); App.UserForm.getForm().reset();")
         )
    ))